define("local_xlate/langswitcher",[],(function(){var container=null,stylesInjected=!1,outsideClickHandler=null,keydownHandler=null;function setDebugState(state){if("undefined"!=typeof window){var current=window.XLATE_LANG_SWITCHER_STATE||{};window.XLATE_LANG_SWITCHER_STATE=Object.assign({},current,state)}}function destroy(){outsideClickHandler&&(document.removeEventListener("click",outsideClickHandler,!0),outsideClickHandler=null),keydownHandler&&(document.removeEventListener("keydown",keydownHandler,!0),keydownHandler=null),container&&container.parentNode&&container.parentNode.removeChild(container),container=null,setDebugState({stage:"destroyed"})}function toggleOpen(button,open,silent){container&&(("boolean"==typeof open?open:!container.classList.contains("xlate-open"))?(container.classList.add("xlate-open"),button&&!silent&&button.setAttribute("aria-expanded","true")):(container.classList.remove("xlate-open"),button&&!silent&&button.setAttribute("aria-expanded","false")))}return{init:function init(config){if(!config||!config.enabled||!Array.isArray(config.languages)||config.languages.length<2)return destroy(),void setDebugState({stage:"disabled",reason:"invalid_config"});if(!document.body)return document.addEventListener("DOMContentLoaded",(function handleReady(){document.removeEventListener("DOMContentLoaded",handleReady),init(config)})),void setDebugState({stage:"waiting_body"});!function(){if(!stylesInjected){stylesInjected=!0;var style=document.createElement("style");style.setAttribute("data-xlate-style","lang-switcher"),style.textContent='.xlate-lang-switcher {  position:fixed;  left:1rem;  bottom:1rem;  z-index:2147483647;  font-family:inherit;  padding-bottom:0.4rem;}.xlate-lang-switcher__toggle {  background:#0f172a;  color:#fff;  border:none;  border-radius:1.5rem;  min-width:62px;  height:46px;  display:inline-flex;  align-items:center;  justify-content:center;  gap:0.5rem;  padding:0 1.1rem;  cursor:pointer;  box-shadow:0 14px 30px rgba(15,23,42,0.35);}.xlate-lang-switcher__toggle:focus {  outline:2px solid #fff;  outline-offset:2px;}.xlate-lang-switcher__toggle-code {  text-transform:uppercase;  font-weight:600;  font-size:0.85rem;  letter-spacing:0.05em;}.xlate-lang-switcher__caret-wrap {  background:rgba(255,255,255,0.18);  border-radius:999px;  width:26px;  height:26px;  display:flex;  align-items:center;  justify-content:center;}.xlate-lang-switcher__caret {  width:9px;  height:9px;  border:solid #fff;  border-width:0 2px 2px 0;  transform:rotate(-135deg);  transition:transform 0.2s ease;}.xlate-lang-switcher.xlate-open .xlate-lang-switcher__caret,.xlate-lang-switcher:hover .xlate-lang-switcher__caret,.xlate-lang-switcher:focus-within .xlate-lang-switcher__caret {  transform:rotate(45deg);}.xlate-lang-switcher__list {  list-style:none;  margin:0;  padding:0.4rem 0;  background:#fff;  color:#1f2933;  border-radius:0.75rem;  min-width:190px;  box-shadow:0 25px 40px rgba(15,23,42,0.25);  opacity:0;  transform:translateY(10px);  pointer-events:none;  transition:opacity 0.2s ease, transform 0.2s ease;  position:absolute;  bottom:calc(100% + 0.2rem);  left:0;}.xlate-lang-switcher__list::after {  content:"";  position:absolute;  left:1.25rem;  bottom:-0.55rem;  width:1.4rem;  height:0.65rem;  background:#fff;  box-shadow:0 12px 22px rgba(15,23,42,0.15);  border-bottom-left-radius:0.65rem;  border-bottom-right-radius:0.65rem;}.xlate-lang-switcher.xlate-open .xlate-lang-switcher__list,.xlate-lang-switcher:hover .xlate-lang-switcher__list,.xlate-lang-switcher:focus-within .xlate-lang-switcher__list {  opacity:1;  transform:translateY(0);  pointer-events:auto;}.xlate-lang-switcher__list li {  margin:0;}.xlate-lang-switcher__link {  display:flex;  align-items:center;  justify-content:space-between;  padding:0.35rem 0.85rem;  text-decoration:none;  color:inherit;  font-size:0.85rem;}.xlate-lang-switcher__link:hover,.xlate-lang-switcher__link:focus {  background:#f3f4f6;}.xlate-lang-switcher__code {  font-size:0.75rem;  color:#4b5563;}.xlate-lang-switcher__link[aria-current="true"] {  font-weight:600;}',document.head.appendChild(style)}}(),destroy(),(container=document.createElement("div")).className="xlate-lang-switcher",container.setAttribute("aria-label","Language selector");var toggle=document.createElement("button");toggle.type="button",toggle.className="xlate-lang-switcher__toggle",toggle.setAttribute("aria-haspopup","listbox"),toggle.setAttribute("aria-expanded","false");var currentEntry=config.languages.find((function(lang){return lang.code===config.current})),toggleCode=document.createElement("span");toggleCode.className="xlate-lang-switcher__toggle-code",toggleCode.textContent=(currentEntry?currentEntry.code:config.current).toUpperCase(),toggle.appendChild(toggleCode),toggle.setAttribute("aria-label","Change language (current "+toggleCode.textContent+")");var caretWrap=document.createElement("span");caretWrap.className="xlate-lang-switcher__caret-wrap";var caret=document.createElement("span");caret.className="xlate-lang-switcher__caret",caret.setAttribute("aria-hidden","true"),caretWrap.appendChild(caret),toggle.appendChild(caretWrap);var list=document.createElement("ul");list.className="xlate-lang-switcher__list",list.setAttribute("role","listbox"),config.languages.forEach((function(lang){var item=document.createElement("li"),link=document.createElement("a");link.className="xlate-lang-switcher__link",link.href=function(code){if(!code)return window.location.href;try{var url=new URL(window.location.href);return url.searchParams.set("lang",code),url.toString()}catch(e){var cleaned=window.location.href.split("#")[0].replace(/([?&])lang=[^&#]*(&|$)/,(function(match,prefix,suffix){return"?"===prefix?prefix:suffix||""})).replace(/[?&]$/,""),sep=-1===cleaned.indexOf("?")?"?":"&";return cleaned+sep+"lang="+encodeURIComponent(code)}}(lang.code),link.textContent=lang.label,link.setAttribute("role","option"),link.setAttribute("data-lang-code",lang.code),lang.code===config.current&&link.setAttribute("aria-current","true");var codeBadge=document.createElement("span");codeBadge.className="xlate-lang-switcher__code",codeBadge.textContent=lang.code.toUpperCase(),link.appendChild(codeBadge),item.appendChild(link),list.appendChild(item)})),toggle.addEventListener("click",(function(e){if(e.preventDefault(),toggleOpen(toggle),container.classList.contains("xlate-open")){var firstLink=list.querySelector("a");firstLink&&firstLink.focus()}})),toggle.addEventListener("keydown",(function(e){if("ArrowDown"===e.key){e.preventDefault(),toggleOpen(toggle,!0);var firstLink=list.querySelector("a");firstLink&&firstLink.focus()}})),list.addEventListener("keydown",(function(e){"Escape"===e.key&&(e.preventDefault(),toggle.focus(),toggleOpen(toggle,!1))})),container.appendChild(toggle),container.appendChild(list),document.body.appendChild(container),setDebugState({stage:"rendered",languages:config.languages.length}),outsideClickHandler=function(event){container&&(container.contains(event.target)||toggleOpen(toggle,!1))},document.addEventListener("click",outsideClickHandler,!0),keydownHandler=function(event){"Escape"===event.key&&toggleOpen(toggle,!1)},document.addEventListener("keydown",keydownHandler,!0)}}}));

//# sourceMappingURL=langswitcher.min.js.map