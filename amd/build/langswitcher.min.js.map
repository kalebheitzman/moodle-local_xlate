{"version":3,"file":"langswitcher.min.js","sources":["../src/langswitcher.js"],"sourcesContent":["// Local Xlate floating language switcher.\n// Renders a bottom-left launcher listing available languages.\n\ndefine([], function () {\n    var container = null;\n    var stylesInjected = false;\n    var outsideClickHandler = null;\n    var keydownHandler = null;\n    var translationPillButton = null;\n    var translationPillLabel = null;\n    var translationPillConfig = null;\n    var translationVisibilityListener = null;\n    var translationReadyListener = null;\n    var translationsVisibleState = true;\n    var translationToggleReady = false;\n\n    /**\n     * Persist debug information for troubleshooting the switcher state.\n     * @param {Object} state - Key/value pairs describing current status.\n     * @returns {void}\n     */\n    function setDebugState(state) {\n        if (typeof window === 'undefined') {\n            return;\n        }\n        var current = window.XLATE_LANG_SWITCHER_STATE || {};\n        window.XLATE_LANG_SWITCHER_STATE = Object.assign({}, current, state);\n    }\n\n    /**\n     * Remove the currently rendered switcher and event listeners.\n     * @returns {void}\n     */\n    function destroy() {\n        if (outsideClickHandler) {\n            document.removeEventListener('click', outsideClickHandler, true);\n            outsideClickHandler = null;\n        }\n        if (keydownHandler) {\n            document.removeEventListener('keydown', keydownHandler, true);\n            keydownHandler = null;\n        }\n        if (container && container.parentNode) {\n            container.parentNode.removeChild(container);\n        }\n        container = null;\n        translationPillConfig = null;\n        translationPillLabel = null;\n        translationPillButton = null;\n        translationToggleReady = false;\n        translationsVisibleState = true;\n        if (translationVisibilityListener) {\n            document.removeEventListener('xlate:visibilitychange', translationVisibilityListener);\n            translationVisibilityListener = null;\n        }\n        if (translationReadyListener) {\n            document.removeEventListener('xlate:ready', translationReadyListener);\n            translationReadyListener = null;\n        }\n        setDebugState({ stage: 'destroyed' });\n    }\n\n    /**\n     * Inject the floating switcher styles once per page.\n     * @returns {void}\n     */\n    function injectStyles() {\n        if (stylesInjected) {\n            return;\n        }\n        stylesInjected = true;\n        var style = document.createElement('style');\n        style.setAttribute('data-xlate-style', 'lang-switcher');\n        style.textContent = '' +\n            '.xlate-lang-switcher {' +\n            '  position:fixed;' +\n            '  left:1rem;' +\n            '  bottom:1rem;' +\n            '  z-index:2147483647;' +\n            '  font-family:inherit;' +\n            '  padding-bottom:0.4rem;' +\n            '  display:flex;' +\n            '  align-items:flex-end;' +\n            '  gap:0.75rem;' +\n            '  flex-wrap:wrap;' +\n            '}' +\n            '.xlate-lang-switcher__control {' +\n            '  position:relative;' +\n            '  display:inline-block;' +\n            '}' +\n            '.xlate-lang-switcher__toggle {' +\n            '  background:#0f172a;' +\n            '  color:#fff;' +\n            '  border:none;' +\n            '  border-radius:1.5rem;' +\n            '  min-width:62px;' +\n            '  height:46px;' +\n            '  display:inline-flex;' +\n            '  align-items:center;' +\n            '  justify-content:center;' +\n            '  gap:0.5rem;' +\n            '  padding:0 1rem 0 1.1rem;' +\n            '  cursor:pointer;' +\n            '  box-shadow:0 14px 30px rgba(15,23,42,0.35);' +\n            '}' +\n            '.xlate-lang-switcher__toggle:focus {' +\n            '  outline:2px solid #fff;' +\n            '  outline-offset:2px;' +\n            '}' +\n            '.xlate-lang-switcher__toggle-code {' +\n            '  text-transform:uppercase;' +\n            '  font-weight:600;' +\n            '  font-size:0.85rem;' +\n            '  letter-spacing:0.05em;' +\n            '}' +\n            '.xlate-lang-switcher__caret-wrap {' +\n            '  background:rgba(255,255,255,0.18);' +\n            '  border-radius:999px;' +\n            '  width:24px;' +\n            '  height:24px;' +\n            '  display:flex;' +\n            '  align-items:center;' +\n            '  justify-content:center;' +\n            '}' +\n            '.xlate-lang-switcher__caret {' +\n            '  width:9px;' +\n            '  height:9px;' +\n            '  border:solid #fff;' +\n            '  border-width:0 2px 2px 0;' +\n            '  transform:rotate(-135deg);' +\n            '  transition:transform 0.2s ease;' +\n            '}' +\n            '.xlate-lang-switcher.xlate-open .xlate-lang-switcher__caret,' +\n            '.xlate-lang-switcher:hover .xlate-lang-switcher__caret,' +\n            '.xlate-lang-switcher:focus-within .xlate-lang-switcher__caret {' +\n            '  transform:rotate(45deg);' +\n            '}' +\n            '.xlate-lang-switcher__list {' +\n            '  list-style:none;' +\n            '  margin:0;' +\n            '  padding:0.4rem 0;' +\n            '  background:#fff;' +\n            '  color:#1f2933;' +\n            '  border-radius:0.75rem;' +\n            '  min-width:190px;' +\n            '  box-shadow:0 25px 40px rgba(15,23,42,0.25);' +\n            '  opacity:0;' +\n            '  transform:translateY(10px);' +\n            '  pointer-events:none;' +\n            '  transition:opacity 0.2s ease, transform 0.2s ease;' +\n            '  position:absolute;' +\n            '  bottom:calc(100% + 0.2rem);' +\n            '  left:0;' +\n            '}' +\n            '.xlate-lang-switcher__list::after {' +\n            '  content:\"\";' +\n            '  position:absolute;' +\n            '  left:1.25rem;' +\n            '  bottom:-0.55rem;' +\n            '  width:1.4rem;' +\n            '  height:0.65rem;' +\n            '  background:#fff;' +\n            '  box-shadow:0 12px 22px rgba(15,23,42,0.15);' +\n            '  border-bottom-left-radius:0.65rem;' +\n            '  border-bottom-right-radius:0.65rem;' +\n            '}' +\n            '.xlate-lang-switcher.xlate-open .xlate-lang-switcher__list,' +\n            '.xlate-lang-switcher:hover .xlate-lang-switcher__list,' +\n            '.xlate-lang-switcher:focus-within .xlate-lang-switcher__list {' +\n            '  opacity:1;' +\n            '  transform:translateY(0);' +\n            '  pointer-events:auto;' +\n            '}' +\n            '.xlate-lang-switcher__list li {' +\n            '  margin:0;' +\n            '}' +\n            '.xlate-lang-switcher__link {' +\n            '  display:flex;' +\n            '  align-items:center;' +\n            '  justify-content:space-between;' +\n            '  padding:0.35rem 0.85rem;' +\n            '  text-decoration:none;' +\n            '  color:inherit;' +\n            '  font-size:0.85rem;' +\n            '}' +\n            '.xlate-lang-switcher__link:hover,' +\n            '.xlate-lang-switcher__link:focus {' +\n            '  background:#f3f4f6;' +\n            '}' +\n            '.xlate-lang-switcher__code {' +\n            '  font-size:0.75rem;' +\n            '  color:#4b5563;' +\n            '}' +\n            '.xlate-lang-switcher__link[aria-current=\"true\"] {' +\n            '  font-weight:600;' +\n            '}' +\n            '.xlate-lang-switcher__notice {' +\n            '  background:#374151;' +\n            '  color:#f9fafb;' +\n            '  border:none;' +\n            '  border-radius:1.5rem;' +\n            '  height:46px;' +\n            '  padding:0 1.2rem 0 1.35rem;' +\n            '  font-weight:600;' +\n            '  font-size:0.85rem;' +\n            '  cursor:pointer;' +\n            '  box-shadow:0 14px 32px rgba(15,23,42,0.2);' +\n            '  transition:background 0.2s ease, color 0.2s ease, opacity 0.2s ease;' +\n            '}' +\n            '.xlate-lang-switcher__notice:focus {' +\n            '  outline:2px solid #cbd5f5;' +\n            '  outline-offset:2px;' +\n            '}' +\n            '.xlate-lang-switcher__notice:hover,' +\n            '.xlate-lang-switcher__notice:focus {' +\n            '  background:#4b5563;' +\n            '}' +\n            '.xlate-lang-switcher__notice[aria-disabled=\"true\"] {' +\n            '  opacity:0.55;' +\n            '  cursor:not-allowed;' +\n            '}' +\n            '.xlate-lang-switcher__notice.is-muted {' +\n            '  background:#1f2937;' +\n            '  color:#f3f4f6;' +\n            '}' +\n            '.xlate-lang-switcher__notice-label {' +\n            '  white-space:nowrap;' +\n            '}' +\n            '.xlate-visually-hidden {' +\n            '  position:absolute;' +\n            '  width:1px;' +\n            '  height:1px;' +\n            '  padding:0;' +\n            '  margin:-1px;' +\n            '  overflow:hidden;' +\n            '  clip:rect(0,0,0,0);' +\n            '  border:0;' +\n            '  white-space:nowrap;' +\n            '}';\n        document.head.appendChild(style);\n    }\n\n    /**\n     * Toggle the open state of the switcher dropdown.\n     * @param {HTMLButtonElement} button - Toggle button reference.\n     * @param {boolean} [open] - Optional forced state.\n     * @param {boolean} [silent] - When true, skips aria-expanded updates.\n     * @returns {void}\n     */\n    function toggleOpen(button, open, silent) {\n        if (!container) {\n            return;\n        }\n        var shouldOpen = typeof open === 'boolean' ? open : !container.classList.contains('xlate-open');\n        if (shouldOpen) {\n            container.classList.add('xlate-open');\n            if (button && !silent) {\n                button.setAttribute('aria-expanded', 'true');\n            }\n        } else {\n            container.classList.remove('xlate-open');\n            if (button && !silent) {\n                button.setAttribute('aria-expanded', 'false');\n            }\n        }\n    }\n\n    /**\n     * Build the current page URL with the provided lang parameter.\n     * @param {string} code - Language code to inject.\n     * @returns {string} URL pointing to the same page with lang updated.\n     */\n    function computeLangUrl(code) {\n        if (!code) {\n            return window.location.href;\n        }\n        try {\n            var url = new URL(window.location.href);\n            url.searchParams.set('lang', code);\n            return url.toString();\n        } catch (e) {\n            var base = window.location.href.split('#')[0];\n            var cleaned = base.replace(/([?&])lang=[^&#]*(&|$)/, function (match, prefix, suffix) {\n                if (prefix === '?') {\n                    return prefix;\n                }\n                return suffix || '';\n            }).replace(/[?&]$/, '');\n            var sep = cleaned.indexOf('?') === -1 ? '?' : '&';\n            return cleaned + sep + 'lang=' + encodeURIComponent(code);\n        }\n    }\n\n    /**\n     * Update the translation notice pill text to reflect current state.\n     * @returns {void}\n     */\n    function updateTranslationPillLabel() {\n        if (!translationPillLabel || !translationPillConfig) {\n            return;\n        }\n        var defaultLabel = translationPillConfig.label || '';\n        var originalLabel = translationPillConfig.originalLabel || translationPillConfig.hoverShowTranslated || defaultLabel;\n        translationPillLabel.textContent = translationsVisibleState ? defaultLabel : originalLabel;\n        if (translationPillButton) {\n            translationPillButton.setAttribute('aria-pressed', translationsVisibleState ? 'false' : 'true');\n            if (translationsVisibleState) {\n                translationPillButton.classList.remove('is-muted');\n            } else {\n                translationPillButton.classList.add('is-muted');\n            }\n        }\n    }\n\n    /**\n     * Update internal readiness state and toggle aria-disabled semantics.\n     * @param {boolean} ready - Whether the translator runtime can toggle visibility.\n     * @returns {void}\n     */\n    function setTranslationToggleReady(ready) {\n        translationToggleReady = !!ready;\n        if (translationPillButton) {\n            translationPillButton.setAttribute('aria-disabled', translationToggleReady ? 'false' : 'true');\n        }\n    }\n\n    /**\n     * Temporarily swap the pill text while hovering/focusing.\n     * @param {boolean} active - Whether the hover/focus state is active.\n     * @returns {void}\n     */\n    function setTranslationPillHover(active) {\n        if (!translationPillLabel || !translationPillConfig) {\n            return;\n        }\n        if (!active) {\n            updateTranslationPillLabel();\n            return;\n        }\n        var hoverLabel = translationsVisibleState ?\n            (translationPillConfig.hoverShowOriginal || translationPillConfig.label || '') :\n            (translationPillConfig.hoverShowTranslated || translationPillConfig.originalLabel || translationPillConfig.label || '');\n        translationPillLabel.textContent = hoverLabel;\n    }\n\n    /**\n     * Render the translation notice/toggle pill and wire up events.\n     * @param {Object} toggleConfig - Translation toggle labels/config.\n     * @returns {void}\n     */\n    function initTranslationPill(toggleConfig) {\n        if (!toggleConfig || !toggleConfig.enabled) {\n            return;\n        }\n        translationPillConfig = toggleConfig;\n        translationPillButton = document.createElement('button');\n        translationPillButton.type = 'button';\n        translationPillButton.className = 'xlate-lang-switcher__notice';\n        translationPillButton.setAttribute('aria-disabled', 'true');\n        translationPillButton.setAttribute('aria-live', 'polite');\n        translationPillButton.setAttribute('aria-pressed', 'false');\n        if (toggleConfig.tooltip) {\n            translationPillButton.setAttribute('title', toggleConfig.tooltip);\n        }\n        translationPillLabel = document.createElement('span');\n        translationPillLabel.className = 'xlate-lang-switcher__notice-label';\n        translationPillLabel.textContent = toggleConfig.label || '';\n        translationPillButton.appendChild(translationPillLabel);\n        if (toggleConfig.help) {\n            var helpId = 'xlate-toggle-help-' + Math.random().toString(36).slice(2);\n            var helpNode = document.createElement('span');\n            helpNode.className = 'xlate-visually-hidden';\n            helpNode.id = helpId;\n            helpNode.textContent = toggleConfig.help;\n            translationPillButton.appendChild(helpNode);\n            translationPillButton.setAttribute('aria-describedby', helpId);\n        }\n\n        ['mouseenter', 'focus'].forEach(function (evt) {\n            translationPillButton.addEventListener(evt, function () {\n                setTranslationPillHover(true);\n            });\n        });\n        ['mouseleave', 'blur'].forEach(function (evt) {\n            translationPillButton.addEventListener(evt, function () {\n                setTranslationPillHover(false);\n            });\n        });\n        translationPillButton.addEventListener('click', function (e) {\n            e.preventDefault();\n            var targetVisible = !translationsVisibleState;\n            var clickTime = Date.now();\n            var isReady = translationToggleReady && typeof window !== 'undefined' &&\n                window.__XLATE__ && typeof window.__XLATE__.setTranslationVisibility === 'function';\n            setDebugState({\n                lastClick: clickTime,\n                requestedVisible: targetVisible,\n                toggleReady: isReady\n            });\n            if (!isReady) {\n                return;\n            }\n            window.__XLATE__.setTranslationVisibility(targetVisible);\n        });\n\n        translationVisibilityListener = function (event) {\n            var detail = event && event.detail ? event.detail : {};\n            translationsVisibleState = detail.visible !== false;\n            updateTranslationPillLabel();\n        };\n        document.addEventListener('xlate:visibilitychange', translationVisibilityListener);\n\n        translationReadyListener = function (event) {\n            var detail = event && event.detail ? event.detail : {};\n            var ready = detail.isTargetLang !== false && !detail.isCapture;\n            setTranslationToggleReady(ready);\n            if (ready && window.__XLATE__) {\n                translationsVisibleState = window.__XLATE__.showTranslations !== false;\n            }\n            updateTranslationPillLabel();\n        };\n        document.addEventListener('xlate:ready', translationReadyListener);\n\n        if (window.__XLATE__) {\n            var readyNow = window.__XLATE__.isTargetLang !== false && !window.__XLATE__.isCapture;\n            setTranslationToggleReady(readyNow);\n            translationsVisibleState = window.__XLATE__.showTranslations !== false;\n        } else {\n            setTranslationToggleReady(false);\n            translationsVisibleState = true;\n        }\n\n        updateTranslationPillLabel();\n        container.appendChild(translationPillButton);\n    }\n\n    /**\n     * Initialise the floating language switcher with provided config.\n    * @param {{\n    *   enabled:boolean,\n    *   current:string,\n    *   languages:Array<{code:string,label:string,url:string}>,\n    *   ariaLabel?:string,\n    *   toggleAriaLabel?:string,\n    *   translationToggle?:{\n    *       enabled:boolean,\n    *       label:string,\n    *       originalLabel:string,\n    *       hoverShowOriginal:string,\n    *       hoverShowTranslated:string,\n    *       tooltip:string,\n    *       help:string\n    *   }\n    * }} config - Switcher config payload.\n     * @returns {void}\n     */\n    function init(config) {\n        if (!config || !config.enabled || !Array.isArray(config.languages) || config.languages.length < 2) {\n            destroy();\n            setDebugState({ stage: 'disabled', reason: 'invalid_config' });\n            return;\n        }\n\n        if (!document.body) {\n            document.addEventListener('DOMContentLoaded', function handleReady() {\n                document.removeEventListener('DOMContentLoaded', handleReady);\n                init(config);\n            });\n            setDebugState({ stage: 'waiting_body' });\n            return;\n        }\n\n        injectStyles();\n        destroy();\n\n        container = document.createElement('div');\n        container.className = 'xlate-lang-switcher';\n        var containerLabel = (config.ariaLabel || 'Language selector');\n        container.setAttribute('aria-label', containerLabel);\n\n        var toggle = document.createElement('button');\n        toggle.type = 'button';\n        toggle.className = 'xlate-lang-switcher__toggle';\n        toggle.setAttribute('aria-haspopup', 'listbox');\n        toggle.setAttribute('aria-expanded', 'false');\n\n        var currentEntry = config.languages.find(function (lang) {\n            return lang.code === config.current;\n        });\n        var toggleCode = document.createElement('span');\n        toggleCode.className = 'xlate-lang-switcher__toggle-code';\n        toggleCode.textContent = (currentEntry ? currentEntry.code : config.current).toUpperCase();\n        toggle.appendChild(toggleCode);\n        var toggleAriaLabel = config.toggleAriaLabel || ('Change language (current ' + toggleCode.textContent + ')');\n        toggle.setAttribute('aria-label', toggleAriaLabel);\n\n        var caretWrap = document.createElement('span');\n        caretWrap.className = 'xlate-lang-switcher__caret-wrap';\n        var caret = document.createElement('span');\n        caret.className = 'xlate-lang-switcher__caret';\n        caret.setAttribute('aria-hidden', 'true');\n        caretWrap.appendChild(caret);\n        toggle.appendChild(caretWrap);\n\n        var list = document.createElement('ul');\n        list.className = 'xlate-lang-switcher__list';\n        list.setAttribute('role', 'listbox');\n\n        config.languages.forEach(function (lang) {\n            var item = document.createElement('li');\n            var link = document.createElement('a');\n            link.className = 'xlate-lang-switcher__link';\n            link.href = computeLangUrl(lang.code);\n            link.textContent = lang.label;\n            link.setAttribute('role', 'option');\n            link.setAttribute('data-lang-code', lang.code);\n            if (lang.code === config.current) {\n                link.setAttribute('aria-current', 'true');\n            }\n            var codeBadge = document.createElement('span');\n            codeBadge.className = 'xlate-lang-switcher__code';\n            codeBadge.textContent = lang.code.toUpperCase();\n            link.appendChild(codeBadge);\n            item.appendChild(link);\n            list.appendChild(item);\n        });\n\n        toggle.addEventListener('click', function (e) {\n            e.preventDefault();\n            toggleOpen(toggle);\n            if (container.classList.contains('xlate-open')) {\n                var firstLink = list.querySelector('a');\n                if (firstLink) {\n                    firstLink.focus();\n                }\n            }\n        });\n\n        toggle.addEventListener('keydown', function (e) {\n            if (e.key === 'ArrowDown') {\n                e.preventDefault();\n                toggleOpen(toggle, true);\n                var firstLink = list.querySelector('a');\n                if (firstLink) {\n                    firstLink.focus();\n                }\n            }\n        });\n\n        list.addEventListener('keydown', function (e) {\n            if (e.key === 'Escape') {\n                e.preventDefault();\n                toggle.focus();\n                toggleOpen(toggle, false);\n            }\n        });\n\n        var control = document.createElement('div');\n        control.className = 'xlate-lang-switcher__control';\n        control.appendChild(toggle);\n        control.appendChild(list);\n        container.appendChild(control);\n\n        if (config.translationToggle && config.translationToggle.enabled) {\n            initTranslationPill(config.translationToggle);\n        }\n\n        document.body.appendChild(container);\n        setDebugState({\n            stage: 'rendered',\n            languages: config.languages.length,\n            translationPill: !!(config.translationToggle && config.translationToggle.enabled)\n        });\n\n        outsideClickHandler = function (event) {\n            if (!container) {\n                return;\n            }\n            if (!container.contains(event.target)) {\n                toggleOpen(toggle, false);\n            }\n        };\n        document.addEventListener('click', outsideClickHandler, true);\n\n        keydownHandler = function (event) {\n            if (event.key === 'Escape') {\n                toggleOpen(toggle, false);\n            }\n        };\n        document.addEventListener('keydown', keydownHandler, true);\n    }\n\n    return {\n        init: init\n    };\n});\n"],"names":["define","container","stylesInjected","outsideClickHandler","keydownHandler","translationPillButton","translationPillLabel","translationPillConfig","translationVisibilityListener","translationReadyListener","translationsVisibleState","translationToggleReady","setDebugState","state","window","current","XLATE_LANG_SWITCHER_STATE","Object","assign","destroy","document","removeEventListener","parentNode","removeChild","stage","toggleOpen","button","open","silent","classList","contains","add","setAttribute","remove","updateTranslationPillLabel","defaultLabel","label","originalLabel","hoverShowTranslated","textContent","setTranslationToggleReady","ready","setTranslationPillHover","active","hoverLabel","hoverShowOriginal","init","config","enabled","Array","isArray","languages","length","reason","body","addEventListener","handleReady","style","createElement","head","appendChild","injectStyles","className","containerLabel","ariaLabel","toggle","type","currentEntry","find","lang","code","toggleCode","toUpperCase","toggleAriaLabel","caretWrap","caret","list","forEach","item","link","href","location","url","URL","searchParams","set","toString","e","cleaned","split","replace","match","prefix","suffix","sep","indexOf","encodeURIComponent","computeLangUrl","codeBadge","preventDefault","firstLink","querySelector","focus","key","control","translationToggle","toggleConfig","tooltip","help","helpId","Math","random","slice","helpNode","id","evt","targetVisible","clickTime","Date","now","isReady","__XLATE__","setTranslationVisibility","lastClick","requestedVisible","toggleReady","event","detail","visible","isTargetLang","isCapture","showTranslations","initTranslationPill","translationPill","target"],"mappings":"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"}